var ie=function(){var t,e=navigator.userAgent.toLowerCase(),i=/\btrident\/([0-9.]+)/,s=/\b(?:msie |ie |trident\/[0-9].*rv[ :])([0-9.]+)/;if(!s.test(e))return!1;var a=i.exec(e);return a?(t=a[1].split("."),t[0]=parseInt(t[0],10)+4,t=t.join(".")):(a=s.exec(e),t=a[1]),parseFloat(t)}(),isIE=ie&&8>=ie&&ie>=6,isWindow=function(t){if("object"!=typeof t)return!1;var e="dom"+ +new Date,i=document.createElement("script"),s=document.getElementsByTagName("head")[0];return s.insertBefore(i,s.firstChild),i.text=e+" = {};",s.removeChild(i),window[e]===t[e]},getCss=function(t,e){return t.currentStyle?t.currentStyle[e.toLowerCase()]:t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null)[e.toLowerCase()]:window.getComputedStyle(t,null)[e.toLowerCase()]},Table=function(t){if(!(this instanceof Table))return new Table(t);if(t=t||{},this.config=t||{},this.id=t.id||this.getNewId(),this._elem=t.elem,this._data=[],t.data&&_.isArray(t.data))for(var e=0;e<t.data.length;e++){var i=_.clone(t.data[e]);delete i._attr,this._data.push(i)}this._dataLength=this._data.length,this._plainLine=[],this._editable=t.editable||!1,this._editButton=t.editButton?this._editable:!1,this._originalLineData=t.originalLineData===!0,this._getLineData=t.getLineData,this._validate=t.validate,this._head=t.head,this._fixedHead=t.fixedHead,this._fixedHeadContainer=t.fixedHeadContainer,this._lineNumber=void 0===t.lineNumber?!0:t.lineNumber,this._lineNumberName=t.lineNumberName||"序号",this._lineStartNumber=t.lineStartNumber||1,this._lineNumberClass=t.lineNumberClass||"table-line-number",this._lineCallback=t.lineCallback,this._onRender=t.onRender,this._callback=t.callback,this.skin=t.skin||"",this.tableskin=t.tableskin||"",this.status=t.status,this.sort=t.sort||!1,this._sortCallback=t.sortCallback,this._NoDataString=t.NoDataString||"暂无数据",this._lineSelect=!!t.lineSelect||!1,this._lineSelectCallback=t.lineSelectCallback||function(){},this._lineSelectClass=t.lineSelectClass||"",this._minRows=t.minRows||1,this._minCols=t.minCols||1,this._maxRows=t.maxRows||200,this._maxCols=t.maxCols||2e4,this.columns=t.columns||{},this.headLength=this._maxCols,this.tpl=t.tpl||Table.tpl,this.lineTpl=t.lineTpl,this.onCheckBoxClick=t.onCheckBoxClick,Table.list[this.id]=this,this.DOM=null,this.lineDOMList=[],this.lineDelButton=[],this.CheckboxList=[],this.init()};Table.list={},Table.tpl='<div class="table-responsive">           <div class="table-responsive-wrap">             <table class="table table-bordered" cellpadding="0" cellspacing="0">               <thead></thead>               <tbody></tbody>             </table>           </div>         </div>',Table.fixedHeadTpl='<div id="fixedhead-wrap">               <table class="table table-hover table-border fixedhead" cellpadding="0" cellspacing="0">                 <thead></thead>                 <tbody></tbody>               </table>             </div>',Table.lineSelectButton='<div class="table-select-button-wrap">                 <input type="checkbox" class="table-select-button">               </div>',Table.prototype.getNewId=function(){var t=0;do t=Math.round(9e3*Math.random()+1e3);while(t in Table.list);return"t"+t},Table.prototype.init=function(){if(this.DOM=document.createElement("div"),this.DOM.id=this.id,this.DOM.innerHTML=this.tpl,this._table=this.DOM.getElementsByTagName("table")[0],this._thead=this.DOM.getElementsByTagName("thead")[0],this._tbody=this.DOM.getElementsByTagName("tbody")[0],this.DOM.className="table-wrap",this.skin&&this._addClass(this.DOM,this.skin),this.tableskin&&this._addClass(this._table,this.tableskin),this._createThead(),this._fixedHead){this.fixedDOM=document.createElement("div"),this.fixedDOM.id="fixedhead_"+this.id,this.fixedDOM.innerHTML=Table.fixedHeadTpl,this.fixedDOM.className=this.DOM.className,this.fixedDOM.style.cssText="position:absolute;top:0;z-index:10;min-width:100%;height:auto",this._fixedtable=this.fixedDOM.getElementsByTagName("table")[0],this._fixedthead=this.fixedDOM.getElementsByTagName("thead")[0],this._fixedtbody=this.fixedDOM.getElementsByTagName("tbody")[0],this._fixedtable.className=this._table.className+" fixedhead",this._addClass(this._table,"fixedbody"),this._createThead(!0),this._fixedHeadContainer?this._fixedHeadContainer.appendChild(this.fixedDOM):this.DOM.firstChild.appendChild(this.fixedDOM);var t,e=this.DOM.childNodes[0].childNodes;for(t=0;t<e.length;t++)1===e[t].nodeType&&this._hasClass(e[t],"table-responsive-wrap")&&this._addClass(e[t],"table-fixed-head")}this._elem.appendChild(this.DOM),this._render(),"function"==typeof this._callback&&this._callback.call(this)},Table.prototype.capitalize=function(t){var e=t.charAt(0);return e.toUpperCase()+t.replace(e,"")},Table.prototype.getPosition=function(t,e){var i={left:["left"],top:["top"],right:["left","Width"],bottom:["top","Height"]},s=getCss(t,"position");if("static"===s)return"auto";if("relative"===s)return"0px";var a,l,n,h=i[e][0],o=this.capitalize(h),d=this.offset(t)[h],r=0;return"absolute"===s?(a=t.offsetParent,("BODY"===a.tagName||"HTML"===a.tagName)&&(a=window),isWindow(a)||(r=parseFloat(getCss(a,"border"+o+"Width"))),n=this.offset(a)[h]+r):(l=window,n=l["scroll"+o]()),d-=n,d+"px"},Table.prototype.offset=function(t,e){var i,s={top:0,left:0},a=t;if(!a||1!==a.nodeType)return s;if(e)return{top:a.offsetTop,left:a.offsetLeft};if(isIE)try{i=a.getBoundingClientRect()}catch(l){return s}var n=9===a.nodeType?a:a.ownerDocument,h=n.documentElement,o=n.body,i=i||a.getBoundingClientRect(),d=h.clientTop||o.clientTop||0,r=h.clientLeft||o.clientLeft||0,c=h.scrollTop||o.scrollTop,_=h.scrollLeft||o.scrollLeft;return n=h=o=null,{top:Math.round(i.top)+c-d,left:Math.round(i.left)+_-r}},Table.prototype.getScroll=function(t,e){var i,s;return i=t,e="scroll"+e,i?(s=isWindow(i)?i:9===i.nodeType?i.defaultView||i.parentWindow:!1,s?s.document.documentElement[e]||s.document.body[e]:i[e]):null},Table.prototype.getBoundary=function(t,e){var i,s,a=a(t),l=0,n=0,h=this.offset(t),o=this.offset(e),d=getCss(e,"top"),r=getCss(e,"left");return"auto"===d&&(d=this.getPosition(e,"top")),"auto"===r&&(r=this.getPosition(e,"left")),a?(i=this.getScroll(t,"Top"),s=this.getScroll(t,"Left")):(i=h.top,s=h.left,l=getCss(t,"borderTopWidth"),n=getCss(t,"borderLeftWidth"),"medium"===l&&(l="0px"),"medium"===n&&(n="0px"),l=parseFloat(l),n=parseFloat(n)),i=i-o.top+parseFloat(d),s=s-o.left+parseFloat(r),{top:i+l,left:s+n}},Table.prototype._hasClass=function(t,e){for(var i=t.className.split(/\s+/),s=0;s<i.length;s++)if(i[s]===e)return!0;return!1},Table.prototype._trim=function(t){return t?t.replace(/(^\s*)|(\s*$)/g,""):""},Table.prototype._addClass=function(t,e){if(e){var i=t.className.split(/\s+/);_.contains(i,e)||(i.push(e),t.className=this._trim(i.join(" ")))}},Table.prototype._removeClass=function(t,e){if(e){var i=t.className.split(/\s+/);i=_.without(i,e),t.className=this._trim(i.join(" "))}},Table.prototype._resetCheckBox=function(){if(this.CheckboxList.length>0){var t=this.CheckboxList[0];t.disabled=0===this._data.length,t.disabled&&(t.checked=!1,this._removeClass(t.parentNode,"selected")),t.checked=this.getSelect().length==this._data.length&&0!=this._data.length,this[t.checked?"_addClass":"_removeClass"](t.parentNode,"selected");for(var e=1;e<this.CheckboxList.length;e++)this.CheckboxList[e].disabled=this._hasClass(this.lineDOMList[e],"plainLine"),this.CheckboxList[e].disabled&&(this.CheckboxList[e].checked=!1,this._removeClass(this.CheckboxList[e].parentNode,"selected"))}},Table.prototype._addEvent=function(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i)},Table.prototype._addHeadCheckBoxClickEvent=function(t){var e=this;this._addEvent(t,"click",function(){for(var i=0;i<e._data.length;i++)e._data[i]._attr.checkbox.disabled||(e._data[i]._attr.select=t.checked,e._data[i]._attr.checkbox.checked=t.checked,t.checked?e._addClass(e._data[i]._attr.checkbox.parentNode,"selected"):e._removeClass(e._data[i]._attr.checkbox.parentNode,"selected"));0==e._data.length?(this.checked=!1,e._removeClass(t.parentNode,"selected")):t.checked?e._addClass(t.parentNode,"selected"):e._removeClass(t.parentNode,"selected"),"function"==typeof e.onCheckBoxClick&&e.onCheckBoxClick.call(e,this.checked,this)})},Table.prototype._addLineCheckBoxClickEvent=function(t){var e=this;this._addEvent(t,"click",function(){for(var i=!0,s=0;s<e._data.length;s++)e._data[s]._attr.checkbox.disabled||(i=i&&e._data[s]._attr.checkbox.checked),e._data[s]._attr.checkbox==t&&(e._data[s]._attr.select=t.checked,t.checked?e._addClass(e._data[s]._attr.checkbox.parentNode,"selected"):e._removeClass(e._data[s]._attr.checkbox.parentNode,"selected"));e.CheckboxList[0].checked=i,e.CheckboxList[0].checked?e._addClass(e.CheckboxList[0].parentNode,"selected"):e._removeClass(e.CheckboxList[0].parentNode,"selected"),"function"==typeof e.onCheckBoxClick&&e.onCheckBoxClick.call(e,this.checked,this)})},Table.prototype._addLineClickEvent=function(t,e){var i=this;this._addEvent(t,"click",function(){if(i._lineSelectClass){for(var s=0;s<i.lineDOMList.length;s++)i._removeClass(i.lineDOMList[s],i._lineSelectClass);i._addClass(t,i._lineSelectClass)}i._lineSelectCallback.call(t,e)})},Table.prototype._getPosition=function(t){var e=t.getBoundingClientRect();return{Top:e.top,Bottom:e.bottom,Left:e.left,Right:e.right,Width:e.width||e.right-e.left,Height:e.height||e.bottom-e.top}},Table.prototype.sortDom=function(t,e,i){var s,a=[],l=this._data,n=!0;for(i=i||this._sortCallback,this.sortCol&&this.sortCol!=="_"+t&&(delete this.sortflag,delete this.sortCol),s=0;s<l.length;s++)if(l[0][t]!==l[s][t]){n=!1;break}if(!n){if("number"===e)for(s=0;s<l.length;s++)if(!/^[\+\-]?(([1-9]\d*)|([1-9]\d*\.\d*[1-9]\d*)|(0\.\d*[1-9]\d*)|0|.{0})$/.test(l[s][t]||"")){e="string";break}for(this.sortDataType!==e&&(this.sortDataType=e,delete this.sortCol),this.sortflag="asc"===this.sortflag?"desc":"desc"===this.sortflag?"asc":"asc",s=0;s<l.length;s++)a[s]=l[s];this.sortCol==="_"+t?a.reverse():a.sort("number"===e?function(e,i){var s=l.indexOf(e),a=l.indexOf(i),n=parseFloat(e[t]),h=parseFloat(i[t]);return isNaN(n)&&(n=-1),isNaN(h)&&(h=-1),n-h||s-a}:"filename"===e?function(i,s){var a,l=i[t]+"",n=s[t]+"",h=!i.version,o=!s.version,d="",r="",c=0,_=0;if(h!==o)return h?-1:1;if(e="string",/\d/.test(l)&&/\d/.test(n))for(a=0;a<l.length&&a<n.length;a++)if(/\d/.test(l[a])&&/\d/.test(n[a])&&l[a]!=n[a]){e="filename",d=l.substr(0,a),r=n.substr(0,a),c=parseFloat(l.substr(a)),_=parseFloat(n.substr(a));break}return"filename"===e?d>r?1:(d==r?0:-1)||c-_:(e="filename",l>n?1:l==n?0:-1)}:function(e,i){var s=e[t]+"",a=i[t]+"";return s.localeCompare(a)}),this._headSortCallback(a,i),this.sortCol="_"+t,this.headSortkey=t}},Table.prototype._headSortCallback=function(t,e){this.render(t,!0,e)},Table.prototype._createThead=function(t){var e=document.createElement("tr"),i=_.keys(this._head),s=i.length<this._minCols?this._minCols:i.length;if(s=s>this._maxCols?this._maxCols:s,this.headLength=s,this._lineSelect&&!t){var a=document.createElement("th");a.className+="table-head-checkbox",a.innerHTML=Table.lineSelectButton,e.appendChild(a),s==this._maxCols?s-=1:this.headLength+=1,this.CheckboxList=[],this.CheckboxList.push(a.getElementsByTagName("input")[0]),this._addHeadCheckBoxClickEvent(this.CheckboxList[0]),this.CheckboxList[0].checked=!1,this._data.length||(this.CheckboxList[0].disabled=!0)}if(this._lineSelect&&t){var a=document.createElement("th");a.className+="table-head-checkbox",a.appendChild(this.CheckboxList[0].parentNode),e.appendChild(a),s==this._maxCols?s-=1:this.headLength+=1}if(this._lineNumber){var a=document.createElement("th");a.className+="table-head-number",a.innerHTML=this._lineNumberName,e.appendChild(a),s==this._maxCols?s-=1:this.headLength+=1}for(var l=0;s>l;l++){var a=document.createElement("th");if(a.innerHTML=this._head[i[l]]||" ",this.columns[i[l]]&&(this.columns[i[l]].style&&a.setAttribute("style",this.columns[i[l]].style),this.columns[i[l]]["class"]&&(a.className=this.columns[i[l]]["class"]),this.sort&&this.columns[i[l]].sort!==!1)){this._addClass(a,"sortable");var n=document.createElement("div"),h=document.createElement("i");h.className="icon-sort",n.className="sortbtn",n.appendChild(h),a.appendChild(n),a.setAttribute("data-sortkey",i[l]),"number"===this.columns[i[l]].sorttype?this._addClass(a,"number"):"filename"===this.columns[i[l]].sorttype&&this._addClass(a,"filename"),this._sortEvent(a)}e.appendChild(a)}e.firstChild&&(this._addClass(e.firstChild,"first"),this._addClass(e.lastChild,"last")),t?this._fixedthead.appendChild(e):(this.lineDOMList.length&&(this.lineDOMList=[]),this.lineDOMList.push(e),this._thead.appendChild(e))},Table.prototype._sortEmpty=function(){if(this.sort){var t,e=this[this._fixedHead?"_fixedthead":"_thead"].getElementsByTagName("button");for(delete this.sortCol,delete this.sortflag,delete this.sortDataType,t=0;t<e.length;t++)this._hasClass(e[t],"sortbtn")&&(e[t].innerHTML="")}},Table.prototype._sortEvent=function(t){var e=this;this._addEvent(t,"mousedown",function(){return!1}),this._addEvent(t,"click",function(){if(0!==e._data.length){var i=this.getElementsByTagName("div")[0],s="string",a=t.parentNode.getElementsByTagName("i");e._hasClass(t,"number")&&(s="number"),e._hasClass(t,"filename")&&(s="filename"),e.sortDom(t.getAttribute("data-sortkey"),s);for(var l=0,n=a.length;n>l;l++)a[l].className="icon-sort";"desc"===e.sortflag?i.innerHTML='<i class="icon-sort-down"></i>':"asc"===e.sortflag&&(i.innerHTML='<i class="icon-sort-up"></i>')}})},Table.prototype._createBodyLine=function(t,e){var i=document.createElement("tr"),s=_.keys(this._head),a=this.headLength;if(t._attr?(this.lineDOMList.splice(_.indexOf(this.lineDOMList,t._attr.view),1,i),t._attr.view=i,t._attr.lineNumber=t._attr.lineNumber||e):t._attr={view:i,lineNumber:e||(e=this._dataLength+1),select:!1},e=t._attr.lineNumber||(e=this._dataLength+1),this._lineSelect){var l=document.createElement("td");l.className+="table-line-checkbox",l.innerHTML=Table.lineSelectButton,i.appendChild(l),a-=1,t._attr.checkbox?this.CheckboxList.splice(_.indexOf(this.CheckboxList,t._attr.checkbox),1,l.getElementsByTagName("input")[0]):this.CheckboxList.push(l.getElementsByTagName("input")[0]),t._attr.checkbox=l.getElementsByTagName("input")[0],t._attr.checkbox.checked=t._attr.select,this[t._attr.select?"_addClass":"_removeClass"](t._attr.checkbox.parentNode,"selected"),this._addLineCheckBoxClickEvent(t._attr.checkbox)}if(this._lineNumber){var l=document.createElement("td");l.className+=this._lineNumberClass,l.innerHTML=e+this._lineStartNumber-1,i.appendChild(l),a-=1,t._attr.lineNumberDom=l}for(var n=_.contains(this._plainLine,t),h=0;a>h;h++){s[h]&&"undefined"==typeof t[s[h]]&&(t[s[h]]="");var l=document.createElement("td"),o=document.createElement("div"),d=document.createElement("div");if(o.className="showdiv",d.className="text",o.appendChild(d),l.appendChild(o),s[h]&&this.columns[s[h]]&&this.columns[s[h]].lineclass&&(l.className=this.columns[s[h]].lineclass),s[h]&&this.columns[s[h]]&&this.columns[s[h]].linestyle&&o.setAttribute("style",this.columns[s[h]].linestyle),!n){if(s[h]&&this.columns[s[h]]&&"function"==typeof this.columns[s[h]].formatter)d.innerHTML=this.columns[s[h]].formatter(t[s[h]],t)||"";else if(s[h]&&this.columns[s[h]]&&this.columns[s[h]].type)if("text"==this.columns[s[h]].type){var r=document.createElement("input");r.className="table-input-text "+s[h],this.columns[s[h]].linestyle&&r.setAttribute("style",this.columns[s[h]].linestyle),r.type="text",r.value=t[s[h]],d.appendChild(r)}else d.innerHTML=_.escape(t[s[h]]);else d.innerHTML=_.escape(t[s[h]]);if(this._editable){var c=document.createElement("div");s[h]&&this.columns[s[h]]&&this.columns[s[h]].linestyle&&c.setAttribute("style",this.columns[s[h]].linestyle),c.className="lockvalue",c.style.display="none",l.appendChild(c)}}this.columns[s[h]]&&this.columns[s[h]].linestyle&&l.setAttribute("style",this.columns[s[h]].linestyle),i.appendChild(l)}return i.firstChild&&(this._addClass(i.firstChild,"first"),this._addClass(i.lastChild,"last")),n&&this._addClass(i,"plainLine"),this._lineSelect&&(this.CheckboxList[this.CheckboxList.length-1].disabled=this._hasClass(i,"plainLine")),"function"==typeof this._lineCallback&&this._lineCallback.call(i,t,this),e&&e<=this.lineDOMList.length?this.lineDOMList[e]=i:this.lineDOMList.push(i),this._addLineClickEvent(i,t),i},Table.prototype._render=function(){var t=this._data.length<this._minRows?this._minRows:this._data.length;if(t=t>this._maxRows?this._maxRows:t,this._data.length>this._maxRows&&(this._dataLength=t),0!==this._data.length||this._maxRows){for(;this._tbody.firstChild;)this._tbody.removeChild(this._tbody.firstChild);if(this.lineDOMList=this.lineDOMList.slice(0,1),this._lineSelect&&this.CheckboxList.length&&(this.CheckboxList=this.CheckboxList.slice(0,1)),this._editable&&this._editButton){for(var e=1;e<this.lineDelButton.length;e++)this.lineDelButton[e].parentNode.removeChild(this.lineDelButton[e]);this.lineDelButton=this.lineDelButton.slice(0,1)}var i=document.createDocumentFragment();this._plainLine=[];for(var e=0;t>e;e++){this._data[e]||this._plainLine.push({});var s=this._createBodyLine(this._data[e]||this._plainLine[this._plainLine.length-1],e+1);i.appendChild(s)}i.firstChild&&(this._addClass(i.firstChild,"first"),this._addClass(i.lastChild,"last")),this._tbody.appendChild(i)}else"loading"==this.status?this.loading():this.nothing();this.setStartNumber(1),this._fixedHead&&(this._fixedtbody.innerHTML=this._tbody.innerHTML)},Table.prototype.render=function(t,e,i){_.isArray(t)||(t=[]),this._data=[];for(var s=0;s<t.length;s++){var a=_.clone(t[s]);delete a._attr,this._data.push(a)}this._data&&(this._dataLength=this._data.length),this._tbody.firstChild==this._nothingNode&&this._tbody.removeChild(this._nothingNode),e!==!0&&(this._sortEmpty(),this.resetSortBtn()),this._render(),this._editable&&this._editButton&&this._resetFloatButton(),this._lineSelect&&this._resetCheckBox(),e&&"function"==typeof i&&i.call(this),"function"==typeof this._callback&&this._callback.call(this)},Table.prototype.resetSortBtn=function(){for(var t=this[this._fixedHead?"_fixedthead":"_thead"].getElementsByTagName("i"),e=0,i=t.length;i>e;e++)t[e].className="icon-sort"},Table.prototype.setStartNumber=function(t){this._lineStartNumber=t},Table.prototype.where=function(t){for(var e=_.clone(_.where(this._data,t)),i=0;i<e.length;i++)delete e[i]._attr;return e},Table.prototype._get=function(t){var e=_.findWhere(this._data,t);return"function"==typeof this._getLineData?_.extend({},e,this._getLineData(e._attr.view,e)||{}):_.extend({},e)},Table.prototype.get=function(t){var e=_.clone(this._get(t));return delete e._attr,e},Table.prototype.filter=function(t){return _.filter(this._data,t)},Table.prototype.addPlainLine=function(t){var e,i,s={};if(this._plainLine.push(s),i=this._createBodyLine(s,this._plainLine.length+this._data.length),t||t===!1){for(;i.firstChild;)e=i.firstChild,i.removeChild(i.firstChild);i.firstChild.colSpan=this.headLength,i.firstChild.innerHTML=t?t:"",i.appendChild(e)}return this._tbody.appendChild(i),i},Table.prototype.add=function(t){if(this._dataLength<this._minRows||this._editable){for(var e=0;e<this._plainLine.length;e++)if(this._plainLine[e]._attr.lineNumber==this._dataLength+1){for(var i in t)"_attr"!=i&&(this._plainLine[e][i]=t[i]);var s=this._plainLine.splice(e,1)[0],a=s._attr.view;delete s._attr.checkbox;var l=this._createBodyLine(s);this._data.push(s),~_.indexOf(this._tbody.childNodes,this._loadingNode)&&this._tbody.removeChild(this._loadingNode),~_.indexOf(this._tbody.childNodes,this._nothingNode)&&this._tbody.removeChild(this._nothingNode),~_.indexOf(this._tbody.childNodes,a)?this._tbody.replaceChild(l,a):this._tbody.appendChild(l);break}this._dataLength+=1}else{this._data.push(t);var n=this._createBodyLine(t);this._tbody.appendChild(n),this._dataLength+=1}this._lineSelect&&this._resetCheckBox()},Table.prototype._update=function(t){var e=t._attr.view,i=this._createBodyLine(t,t._attr.lineNumber);this._tbody.replaceChild(i,e),this._lineSelect&&this._resetCheckBox()},Table.prototype.remove=function(t){var e=_.findWhere(this._data,t);if(!e)return!1;var i=_.indexOf(this._data,e)+1;if(this._tbody.removeChild(e._attr.view),this._data.splice(i-1,1),this._dataLength=this._data.length,this.lineDOMList.splice(i,1),this._lineSelect&&(this.CheckboxList.splice(i,1),this._resetCheckBox()),this._lineNumber){for(var s=i-1;s<this._data.length;s++)this._data[s]._attr.lineNumber-=1;for(var s=0;s<this._plainLine.length;s++)this._plainLine[s]._attr.lineNumber-=1;for(var s=i;s<this.lineDOMList.length;s++)for(var a=this.lineDOMList[s].childNodes,l=0;l<a.length;l++)this._hasClass(a[l],this._lineNumberClass)&&(a[l].innerHTML-=1)}if(this.lineDOMList.length-1<this._minRows&&this.addPlainLine(),this._editable&&this._editButton){var n=this.lineDelButton.splice(i,1)[0];n.parentNode.removeChild(n),this._resetFloatButton();for(var s=1;s<this.lineDelButton.length;s++)this._resetDeleteButton(this.lineDelButton[s],this.lineDOMList[s])}return!0},Table.prototype.modify=function(t,e){var i=_.findWhere(this._data,t);for(var s in e)"_attr"!=s&&(i[s]=e[s]);this._update(i)},Table.prototype.select=function(t){if(this._lineSelect)for(var e=0;e<t.length;e++){var i=this._get(t[e])._attr.checkbox;i.checked||i.click()}},Table.prototype.unSelect=function(t){if(this._lineSelect)for(var e=0;e<t.length;e++){var i=this._get(t[e])._attr.checkbox;i.checked&&i.click()}},Table.prototype.getSelect=function(t){for(var e=[],i=this.getAllData(!0),s=0;s<i.length;s++)i[s]._attr.select===!0&&(t||delete i[s]._attr,e.push(i[s]));return e},Table.prototype.loading=function(t){this._data=[];var e=document.createElement("tr"),i=document.createElement("td");for(i.innerHTML=_.isUndefined(t)?'<span class="mr05"><img src="data:image/gif;base64,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"/></span>正在载入...':t,i.colSpan=this.headLength,i.className="loading",e.appendChild(i);this._tbody.firstChild;)this._tbody.removeChild(this._tbody.firstChild);this.lineDOMList=this.lineDOMList.slice(0,1),this.CheckboxList.length&&(this.CheckboxList=this.CheckboxList.slice(0,1)),this._tbody.appendChild(e),this._loadingNode=e},Table.prototype.lock=function(){this.islock=!0;var t=document.createElement("img");if(t.src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",t.setAttribute("style","position:absolute;left:0;top:0;height:100%;width:100%;z-index:99"),this.DOM.appendChild(t),this._lockImg=t,this._editable&&this._editButton){this.floatButton.style.display="none";for(var e=1;e<this.lineDelButton.length;e++)this.lineDelButton[e].style.display="none"}},Table.prototype.unlock=function(){if(this._lockImg&&this.DOM.removeChild(this._lockImg)&&(this.islock=!1),this._editable&&this._editButton){this.floatButton.style.display="block";for(var t=1;t<this.lineDelButton.length;t++)this.lineDelButton[t].style.display="block"}},Table.prototype.getAllData=function(t){var e,i=[];if("function"==typeof this._getLineData)for(var s=0;s<this._data.length;s++)e=t||this._originalLineData?_.extend({},this._data[s],this._getLineData(this._data[s]._attr.view,this._data[s])||{}):_.extend({},this._getLineData(this._data[s]._attr.view,this._data[s])||{}),t||delete e._attr,i.push(e);else for(var s=0;s<this._data.length;s++)e=_.extend({},this._data[s]),t||delete e._attr,i.push(e);return i},Table.prototype.nothing=function(t){this._data=[];var e=document.createElement("tr"),i=document.createElement("td");for(i.innerHTML=_.isUndefined(t)?this._NoDataString:t,i.colSpan=this.headLength,i.className="nothing",e.appendChild(i);this._tbody.firstChild;)this._tbody.removeChild(this._tbody.firstChild);this.lineDOMList=this.lineDOMList.slice(0,1),this.CheckboxList.length&&(this.CheckboxList=this.CheckboxList.slice(0,1)),this._tbody.appendChild(e),this._nothingNode=e},Table.prototype.destroy=function(){delete Table.list[this.id],this._data=[],this.lineDOMList=[],this.lineDelButton=[],this.CheckboxList=[],this.DOM.parentNode.removeChild(this.DOM)};